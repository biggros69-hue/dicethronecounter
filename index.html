<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dice Throne Pokémon</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" sizes="192x192" href="icon.png">
    <link rel="icon" sizes="512x512" href="icon.png">
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="icon" type="image/png" href="icon.png">
    <meta name="theme-color" content="#282828">
</head>
<body>

    <div id="selection-screen">
        <h1 style="text-shadow: 2px 2px 10px black;">QUI ES-TU ?</h1>
        <div class="hero-options">
            <div class="hero-card" onclick="selectHero('boy')">
                <img src="boy.png" alt="Dresseur">
                <h3>DRESSEUR</h3>
            </div>
            <div class="hero-card" onclick="selectHero('girl')">
                <img src="girl.png" alt="Dresseuse">
                <h3>DRESSEUSE</h3>
            </div>
        </div>
    </div>

    <div id="app-interface">
        <button class="back-btn" onclick="location.reload()">↩</button>
        <div class="top-half">
            <img id="hero-title" src="" alt="Titre">
            <div class="counter-row">
                <button class="control" onclick="change('hp', -1)">-</button>
                <div class="value-box">
                    <div style="color:var(--text-color); opacity: 0.7; font-size:0.6rem; font-weight: bold;">POINTS DE VIE</div>
                    <span id="hp" class="value">50</span>
                </div>
                <button class="control" onclick="change('hp', 1)">+</button>
            </div>
            <div class="counter-row">
                <button class="control" onclick="change('cp', -1)">-</button>
                <div class="value-box">
                    <div style="color:var(--text-color); opacity: 0.7; font-size:0.6rem; font-weight: bold;">COMBAT (PC)</div>
                    <span id="cp" class="value">2</span>
                </div>
                <button class="control" onclick="change('cp', 1)">+</button>
            </div>
            <div class="counter-row">
                <button class="control" onclick="change('turn', -1)">-</button>
                <div class="value-box">
                    <div style="color:var(--text-color); opacity: 0.7; font-size:0.6rem; font-weight: bold;">TOUR</div>
                    <span id="turn" class="value">1</span>
                </div>
                <button class="control" onclick="change('turn', 1)">+</button>
            </div>
            <div id="ultralaser-container">
                <button id="btn-ultralaser" onclick="useUltralaser()">⚡ ULTRA-LASER PRÊT ⚡</button>
            </div>
        </div>
        <div class="bottom-half"></div>
    </div>

    <script>
        const heroes = {
            'boy': { 
                bg: 'url("fond_boy.png")', poke: 'url("boy_team.png")', 
                box: 'rgba(40, 40, 40, 0.8)', text: '#ff6600', border: '#ff6600', special: true 
            },
            'girl': { 
                bg: 'url("fond_girl.png")', poke: 'url("girl_team.png")', 
                box: 'rgba(255, 255, 255, 0.8)', text: '#ff0077', border: '#ff0077', special: false 
            }
        };

        let laserCooldown = 0;

        function selectHero(key) {
            const h = heroes[key];
            
            // On applique TOUS les styles ici
            document.documentElement.style.setProperty('--bg-url', h.bg);
            document.documentElement.style.setProperty('--poke-url', h.poke);
            document.documentElement.style.setProperty('--box-bg', h.box);
            document.documentElement.style.setProperty('--text-color', h.text);
            document.documentElement.style.setProperty('--btn-border', h.border);
            
            // Mise à jour de l'image titre
            document.getElementById('hero-title').src = 'titre_' + key + '.png';

            // Gestion du bouton spécial
            if(h.special) {
                document.getElementById('ultralaser-container').style.display = 'block';
            } else {
                document.getElementById('ultralaser-container').style.display = 'none';
            }

            document.getElementById('selection-screen').style.display = 'none';
            document.getElementById('app-interface').style.display = 'flex';
        }

        function change(id, amount) {
            let el = document.getElementById(id);
            let val = parseInt(el.innerText) + amount;
            if (id === 'turn') {
                val = Math.max(1, val);
                if (amount > 0 && laserCooldown > 0) { laserCooldown--; updateLaserButton(); }
            }
            else if (id === 'cp') val = Math.max(0, Math.min(15, val));
            else val = Math.max(0, val);
            el.innerText = val;
        }

        function useUltralaser() { if (laserCooldown === 0) { laserCooldown = 2; updateLaserButton(); } }
        
        function updateLaserButton() {
            const btn = document.getElementById('btn-ultralaser');
            if (laserCooldown > 0) {
                btn.classList.add('cooldown');
                btn.innerText = `RECHARGE : ${laserCooldown} TOURS`;
                btn.disabled = true;
            } else {
                btn.classList.remove('cooldown');
                btn.innerText = "⚡ ULTRA-LASER PRÊT ⚡";
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>